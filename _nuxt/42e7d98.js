(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{432:function(e,t,n){"use strict";n.r(t);var r=n(358),o=n(46),c=n(2),h=n(27),l=n(26),d=(n(47),n(18),n(5),n(4),n(8),n(10),n(11),n(388)),f=n(418),m=n(419),w=n(420);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var j=Object(h.a)((function e(t){Object(l.a)(this,e),this.meshes=t})),C={props:{link:String},data:function(){return{camera:null,scene:null,renderer:null,gltf:null,orbitControls:null,transformControls:null,assets:[],gltfName:"",objectMesh:null,box:null}},mounted:function(){var e=this,t=this.$refs.container;this.camera=new d.X(60,this.$refs.container.clientWidth/this.$refs.container.clientHeight,1,1e4),this.camera.focus=100,this.camera.position.set(0,2,2),this.scene=new d.ib;var n=new d.Z(16777215,1);n.position.set(0,10,0),this.scene.add(n);var r=new d.a(16777215);this.scene.add(r),this.renderer=new d.zb({alpha:!0}),this.renderer.setSize(this.$refs.container.clientWidth,this.$refs.container.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.gammaFactor=1.5,this.renderer.gammaOutput=!0,t.appendChild(this.renderer.domElement),this.scene.add(this.gridHelper),this.orbitControls=new m.a(this.camera,this.renderer.domElement),this.orbitControls.addEventListener("change",(function(){return e.renderer.render(e.scene,e.camera)}),this.orbitControls.enableZoom=!1),this.transformControls=new w.a(this.camera,this.renderer.domElement),this.scene.add(this.transformControls),this.loadGLTF("../test.glb"),this.animate()},methods:{toggleClick:function(e){var t=this,n=new d.gb,r=new d.wb;e.preventDefault(),r.x=(e.clientX-this.$refs.container.getBoundingClientRect().x)/this.$refs.container.clientWidth*2-1,r.y=-(e.clientY-this.$refs.container.getBoundingClientRect().y)/this.$refs.container.clientHeight*2+1,n.setFromCamera(r,this.camera);var o=this.assets.map((function(e){return e.meshes})).flat(),c=n.intersectObjects(o,!0);void 0!==c[0]&&(this.objectMesh=c[0],c[0].object.traverseAncestors((function(e){void 0!==e.userData.asset&&(t.gltfName=e.userData.asset.name)})))},loadGLTF:function(e){var t=this;console.log(e),(new f.a).load(e,(function(e){return t.loadfile(e)}),(function(e){console.log("An error happened"+e)}))},loadfile:function(e){var t=this;this.scene.remove(this.scene.getObjectByName("New")),e.scenes.map((function(n){t.scene.name="New",t.scene.add(n);var r=new j(e.scene.children);t.assets.push(r),n.children.forEach((function(e){e.userData=O(O({},e.userData),{},{asset:r})})),t.fitCameraToCenteredObject(n,1,.5,.3,1),t.renderer.render(t.scene,t.camera)})),this.animate()},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)},fitCameraToCenteredObject:function(object,e,t,n,r){this.camera.fov=18,this.camera.updateProjectionMatrix();var o=new d.d;o.setFromObject(object);var c=new d.xb,h=new d.xb;o.getSize(h),o.getCenter(c);var l=this.camera.fov*(Math.PI/180),f=2*Math.atan(Math.tan(l/2)*this.camera.aspect),m=h.z/2+Math.abs(h.x/2/Math.tan(f/2)),w=h.z/2+Math.abs(h.y/2/Math.tan(l/2)),v=Math.max(m,w);void 0!==e&&0!==e&&(v*=e),this.camera.position.set(v*t,v*n,v*r);var O=o.min.z,j=O<0?-O+v:v-O;this.camera.far=3*j,this.camera.lookAt(c.x,c.y,c.z),v>1e4&&(this.camera.near=10,this.camera.far=1e5),this.camera.updateProjectionMatrix(),void 0!==this.orbitControls&&(this.orbitControls.target=new d.xb(c.x,c.y,c.z),this.orbitControls.maxDistance=2*j)}}},y=n(38),component=Object(y.a)(C,(function(){var e=this,t=e._self._c;return t(o.a,{attrs:{color:"transparent",width:"100%",height:"100%"}},[t(r.a,{ref:"container",attrs:{id:"container","align-center":"","justify-center":"","fill-height":""},on:{click:function(t){return e.toggleClick(t)}}})],1)}),[],!1,null,"2935fc2b",null);t.default=component.exports}}]);